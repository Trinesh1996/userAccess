'use strict';let userService,rolesService;_443‍.x([["userManagement",()=>userManagement],["roleManagement",()=>roleManagement]]);_443‍.w("./user_queries",[["default",["userService"],function(v){userService=v}]]);_443‍.w("./roles_queries",[["default",["rolesService"],function(v){rolesService=v}]]);
require('dotenv').config();

const { Pool } = require("pg")


// SSL connection
let useSSL = false;
let local = process.env.LOCAL || false;
if (process.env.DATABASE_URL && !local) {
  useSSL = true
}

// connect to db
const connectionString = process.env.POSTGRES_HOST

const pool = new Pool({
  connectionString,
  ssl: useSSL
})

pool.on("error", (err, client) => 
{
  _443‍.g.console.error('Unexpected error on idle client', err)
  process.exit(-1)
})


var db = {
    query: (text, params, callback) => {
      return pool.query(text, params, callback)
    },
}




var userManagement = userService({db})
var roleManagement = rolesService({db})


